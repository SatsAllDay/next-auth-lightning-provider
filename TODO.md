# TODO

Below is a TODO list for further development of `next-auth-lightning-provider`

### Primary

- support `next-auth@4` and `next-auth@5`
- investigate CSRF for next-auth

### Secondary

- carefully run through the auth and data flow to look for bugs or oversights
- add jest tests for all utils
- consider how to clean up old and unused lnauth session data that was created but never reached success state

### Tertiary

- consider / investigate how to SSR react components so the `vanilla.ts` shim can be depricated
- add JSDocs comments to functions / hooks etc
- decide on terminology (avatar or image or picture)
- add more example repos
- add spinner to Loading component
- open PR on `next-auth`
- add `auto` color scheme that uses browsers dark/light settings
- cancel inflight api requests if hook unmounts
- consider adding various styles of avatar and name generators
- support multiple file types for avatar and qr
- rename `useLnUrl` to `useLightningAuthUrl`
- see if TS generics can be used for NextRequest/NextApiRequest etc
- error handling: of App Router APIs, of error thrown in `storage.get` and other storage methods, of error at end of API if no paths matched, "You are already logged in" error. etc
- make generators return strings instead of objects `{ qr: "..." }`
- consider standardising APIs so they're all either POST or GET

### Readme

- add yellow notes to diagram.
- add info about deterministic generation of image and name
- carefully scan for errors and typos
- see if config docs can be moved into TS file and autogenerated
- add examples/images showing generator outputs. e.g. bottts images
- ensure consistent formatting is used. full stops, caps, etc
